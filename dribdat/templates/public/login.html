{% extends "layout.html" %}

{% block page_title %}Log in{% endblock %}
{% block body_class %}userform login{% endblock %}

{% block content %}
<div class="container-narrow">
  <h1 class="huge">Log in</h1>
  <br/>

  {% if config.DRIBDAT_HELP_REGISTER %}
    <p>
      {{ config.DRIBDAT_HELP_REGISTER|markdown }}
    </p>
  {% endif %}

  {% include "includes/loginsso.html" %}

  {% if config.DRIBDAT_ALLOW_LOGINS %}
    {% if oauth_type or config.MAIL_SERVER %}
        <p>Use your Dribdat account credentials here:</p>
    {% endif %}

    <form id="loginForm" method="POST" action="{{ url_for('auth.login', next=request.args.get('next')) }}" role="login" class="navbar-form form-inline">
      {{ form.hidden_tag() }}
      <div class="form-group">
        {{ form.username(placeholder="username", class_="form-control w-100") }}
        {{ form.password(placeholder="password", class_="form-control w-100") }}
      </div>

      {% if config.RECAPTCHA_PUBLIC_KEY %}
          <div class="form-group">
              {{ form.recaptcha }}
          </div>
      {% endif %}

      <div class="form-group">
        <button type="submit" class="btn btn-default btn-primary btn-submit mt-2 w-100">Verify me</button>
      </div>
    </form>
    <br>
    {% if config.MAIL_SERVER %}
      <p>
        <i class="fa fa-arrow-right" aria-hidden="true"></i>
        <b><a href="{{ url_for('auth.forgot') }}">Sign in by e-mail</a></b>
        if you do not know your password.
      </p>
    {% endif %}
  {% endif %}

  {% if not config.DRIBDAT_NOT_REGISTER %}
    <p class="account-register">
      <a class="btn btn-success btn-submit" href="{{ url_for('auth.register', next=request.args.get('next')) }}">Create an account</a>
    </p>
  {% endif %}
  
  {% if config.OAUTH_LINK_REGISTER %}
    <p class="account-register">
      <a class="btn btn-info btn-submit" href="{{ config.OAUTH_LINK_REGISTER }}">Register for an account</a>
    </p>
  {% endif %}

</div>
{% endblock %}
