{% from "macros/_form.html" import render_form %}

{% extends "layout.html" %}

{% block page_title %}Edit: {{event.name}}{% endblock %}
{% block body_class %}eventform eventedit{% endblock %}

{% block content %}
  <h2 class="huge">
    Edit event
  </h2>

  {% if current_user.active and current_user.is_admin %}
      <div role="group" aria-label="Event administration" class="btn-group admin-area mb-4 float-right clear-both">
        <a href="{{ url_for('admin.event', event_id=event.id) }}" class="btn btn-info"
            title="Edit event details (admin view)">
            <i class="fa fa-pencil" aria-hidden="true"></i>
            Edit all details</a>
        <a href="{{ url_for('admin.event_projects', event_id=event.id) }}" class="btn btn-light"
            title="Administer event projects">
            <i class="fa fa-check" aria-hidden="true"></i>
            Challenges</a>
        <a href="{{ url_for('admin.project_new', event_id=event.id) }}" class="btn btn-warning"
            title="Or project (admin view)">
            <i class="fa fa-plus"></i>
            Add a challenge</a>
      </div>
  {% endif %}

  <a class="btn btn-light btn-lg mb-4" href="{{ url_for('public.event', event_id=event.id) }}">
    <i class="fa fa-arrow-left" aria-hidden="true"></i>
    <span>Cancel</span></a>

  <div class="jumbotron">
    {{ render_form(url_for('public.event_edit', event_id=event.id), form, formid='eventEdit') }}
  </div>

  {% if config.S3_KEY %}
  <button type="button" class="btn btn-light btn-lg mt-2 m-1" style="display:none" data-bs-toggle="modal" data-bs-target="#uploadImage">
    <i class="fa fa-image text-info" area-hidden="true"></i>
    Upload Image
  </button>
  {% endif %}

  {% include "includes/uploader.html" %}

{% endblock %}
